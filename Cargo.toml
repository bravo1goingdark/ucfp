[package]
name = "ucfp"
version = "0.1.0"
edition = "2021"
description = "Universal Content Fingerprinting (UCFP) core library"
license = "Apache-2.0"
repository = "https://github.com/bravo1goingdark/ucfp"
include = ["src/**/*", "Cargo.toml", "README.md", "LICENSE"]

[dependencies]
canonical = { package = "content-canonical", version = "0.1.0", path = "crates/canonical" }
ingest = { package = "content-ingest", version = "0.1.0", path = "crates/ingest" }
perceptual = { package = "content-perceptual", version = "0.1.0", path = "crates/perceptual" }
semantic = { package = "content-semantic", version = "0.1.0", path = "crates/semantic" }
index = { package = "content-index", version = "0.1.0", path = "crates/index" }
matcher = { version = "0.1.0", path = "crates/matcher" }
chrono = { version = "0.4", features = ["serde"] }
anyhow = "1.0"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
serde_yaml = "0.9"
thiserror = "2.0.17"
tokio = { version = "1.42", features = ["rt", "rt-multi-thread"] }
ndarray = "0.17"

[dev-dependencies]
criterion = { version = "0.8.2", features = ["html_reports", "async_tokio"] }
tempfile = "3"
ndarray = "0.17"
server = { package = "ucfp-server", version = "0.1.0", path = "crates/server" }
rand = "0.10.0"
futures = "0.3"
rayon = "1.10"

[[bench]]
name = "pipeline"
harness = false

[[bench]]
name = "canonicalize_bench"
harness = false

[[bench]]
name = "perceptual_bench"
harness = false

[[bench]]
name = "index_bench"
harness = false

[[bench]]
name = "semantic_bench"
harness = false

[[bench]]
name = "ingest_bench"
harness = false

[[bench]]
name = "matcher_bench"
harness = false

[[bench]]
name = "storage_bench"
harness = false

[[bench]]
name = "ann_bench"
harness = false

[[bench]]
name = "scalability_bench"
harness = false

[[bench]]
name = "concurrency_bench"
harness = false

[workspace]
members = [
    "crates/canonical",
    "crates/ingest",
    "crates/perceptual",
    "crates/semantic",
    "crates/index",
    "crates/matcher",
    "crates/server"
]

[profile.release]
opt-level = 3
lto = "fat"
codegen-units = 1
panic = "abort"

[profile.bench]
opt-level = 3
lto = "fat"
codegen-units = 1
debug = true
